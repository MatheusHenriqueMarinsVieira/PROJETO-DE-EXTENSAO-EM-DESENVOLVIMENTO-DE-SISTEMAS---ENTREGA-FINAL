<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tim Maia ‚Äì Nuvens | Vinil Express</title>
  <link rel="stylesheet" href="style-descricao.css">
</head>
<body class="descricao-page">
  <header>
        <div class="logo">
        <img src="imagens/mascote1.png" alt="Vinil Express">
        </div>

        <nav>
        <ul>
         <li><a href="index.html">Home</a></li> |
         <li><a href="sobre.html">Sobre N√≥s</a></li> |
         <li><a href="discos.html">Discos</a></li> |
         <li><a href="contato.html">Contato</a></li> |
        </ul>
        </nav>

        <div class="login-links">
        <a href="cadastro.html">Cadastre-se</a> | <a href="login.html">Fazer Login</a>
        <a href="favoritos.html" class="favoritos-link">
      ‚ù§Ô∏è <span id="favoritos-count">0</span>
      </a>
        </div>
    </header>

  <main>
    <section class="descricao-container">
      <div class="descricao-content">
        <div class="descricao-imagem">
          <img src="imagens/imagem10.png" alt="Tim Maia Nuvens">
          <img src="imagens/imagem14.png" class="vinil" alt="Vinil">
        </div>
        <div class="descricao-texto">
          <h1>Tim Maia ‚Äì Nuvens</h1>
          <p>
            ‚ÄúNuvens‚Äù apresenta um Tim Maia mais maduro, misturando soul, samba e romantismo.  
            As letras refletem sobre amor e espiritualidade, mantendo o estilo inconfund√≠vel do artista.
          </p>

          <h3>Principais m√∫sicas:</h3>
          <ol>
            <li>‚ÄúNuvens‚Äù</li>
            <li>‚ÄúVoc√™‚Äù</li>
            <li>‚ÄúAcende o Farol‚Äù</li>
          </ol>

          <!-- üî• BOT√ÉO FAVORITAR NOVO SISTEMA -->
          <!-- TROCAR O 2 PELO ID REAL DO BANCO -->
          <button class="favoritar" onclick="favoritarDisco(2)">‚ù§Ô∏è Favoritar</button>

        </div>
      </div>
    </section>
  </main>

  <footer>
    <nav class="footer-nav">
      <a href="index.html">Home</a> | 
      <a href="sobre.html">Sobre N√≥s</a> |
      <a href="discos.html">Discos</a> |
      <a href="contato.html">Contato</a> |
    </nav>

    <div class="footer-content">
      <div class="footer-logo">
        <img src="imagens/logo1.png" alt="Logo Vinil Express">
        <p>Vinil Express</p>
      </div>

      <div class="footer-social">
        <img src="imagens/mascote1.png" alt="Mascote Vinil" class="mascote">
      </div>
    </div>

    <p class="footer-copy">¬©2025 Todos os direitos reservados</p>
  </footer>

  <!-- ===================================== -->
  <!-- SCRIPT NOVO PARA FAVORITAR DISCO     -->
  <!-- ===================================== -->
  <script>
    async function favoritarDisco(discoId) {
        const usuarioId = localStorage.getItem("usuarioId");

        if (!usuarioId) {
            alert("Voc√™ precisa fazer login para favoritar!");
            window.location.href = "login.html";
            return;
        }

        const dados = {
            usuario_id: usuarioId,
            disco_id: discoId
        };

        const resposta = await fetch("http://localhost:3000/favoritos", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(dados)
        });

        const json = await resposta.json();

        if (resposta.status === 409) {
            alert("Este disco j√° est√° nos favoritos!");
        } else if (resposta.ok) {
            alert("Disco adicionado aos favoritos!");
        } else {
            alert("Erro ao favoritar: " + json.erro);
        }
    }
  </script>

</body>
</html>
