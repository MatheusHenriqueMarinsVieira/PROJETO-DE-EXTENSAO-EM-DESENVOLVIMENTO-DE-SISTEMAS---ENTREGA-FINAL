<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vinil Express - Cadastro</title>
    <link rel="stylesheet" href="style-cadastro.css">
    <script src="api.js" defer></script>
</head>
<body>
    <div class="container">


        <div class="form-section">
            <h1>CADASTRE-SE</h1>

            <form class="cadastro-form">
                <label for="nome">NOME:</label>
                <input type="text" id="nome" required>

                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" required>

                <label for="nascimento">DATA DE NASCIMENTO:</label>
                <input type="date" id="nascimento" required>

                <label for="telefone">TELEFONE:</label>
                <input type="tel" id="telefone" required>

                <label for="email">E-MAIL:</label>
                <input type="email" id="email" required>

                <label for="senha">SENHA:</label>
                <input type="password" id="senha" required>

                <label for="cep">CEP:</label>
                <input type="text" id="cep" required>

                <label for="rua">RUA:</label>
                <input type="text" id="rua" required>

                <label for="numero">NÃšMERO:</label>
                <input type="text" id="numero" required>

                <label for="complemento">COMPLEMENTO (OPCIONAL):</label>
                <input type="text" id="complemento">

                <label for="bairro">BAIRRO:</label>
                <input type="text" id="bairro" required>

                <label for="cidade">CIDADE:</label>
                <input type="text" id="cidade" required>

                <label for="estado">ESTADO:</label>
                <input type="text" id="estado" required>

                <button type="submit" class="btn-criar">Criar uma conta</button>
            </form>
        </div>
        <div class="image-section">
            <!-- ðŸ–¼ï¸ Coloque aqui a imagem da lateral com o disco e notas musicais -->
        </div>
    </div>
    <script>
document.querySelector(".cadastro-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const data = {
    nome: document.getElementById("nome").value,
    cpf: document.getElementById("cpf").value,
    data_nascimento: document.getElementById("nascimento").value,
    telefone: document.getElementById("telefone").value,
    email: document.getElementById("email").value,
    senha: document.getElementById("senha").value,
    cep: document.getElementById("cep").value,
    rua: document.getElementById("rua").value,
    numero: document.getElementById("numero").value,
    complemento: document.getElementById("complemento").value,
    bairro: document.getElementById("bairro").value,
    cidade: document.getElementById("cidade").value,
    estado: document.getElementById("estado").value
  };

  const res = await fetch("http://localhost:3000/register", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  const json = await res.json();

  if (res.ok) {
    alert("Cadastrado! ID: " + json.id);
  } else {
    alert("Erro: " + (json.erro || JSON.stringify(json)));
  }
});
</script>
</body>
</html>
